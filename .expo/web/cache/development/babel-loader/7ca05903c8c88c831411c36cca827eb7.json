{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = Messenger;\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactNative3dcubeNavigation = require(\"react-native-3dcube-navigation\");\n\nvar _reactNativeLinearGradient = _interopRequireDefault(require(\"react-native-linear-gradient\"));\n\nvar _config = require(\"../../config\");\n\nvar _styles = _interopRequireDefault(require(\"./styles\"));\n\nvar _StoryContainer = _interopRequireDefault(require(\"./components/StoryContainer\"));\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _user = require(\"../../../state/ducks/user\");\n\nvar _auth = require(\"../../../providers/auth\");\n\nvar _jsxFileName = \"C:\\\\Program Files\\\\nodejs\\\\ComeClosely\\\\app\\\\views\\\\screens\\\\Messenger\\\\index.tsx\";\nvar MessagesData = [{\n  id: '0',\n  user: 'Sankhadeep',\n  message: 'Its time to build a difference ...',\n  image: _config.AppImages.avata1,\n  date: '3 minutes ago'\n}, {\n  id: '1',\n  user: 'nik',\n  message: 'Its time to build a difference ...',\n  image: _config.AppImages.avata2,\n  date: '2 days ago'\n}, {\n  id: '2',\n  user: 'dhaval',\n  message: 'Its time to build a difference ...',\n  image: _config.AppImages.avata3,\n  date: 'Dec 11, 2018'\n}, {\n  id: '3',\n  user: 'johnson',\n  message: 'Its time to build a difference ...',\n  image: _config.AppImages.avata4,\n  date: 'Dec 16, 2018'\n}];\n\nfunction Messenger(_ref) {\n  var _this = this;\n\n  var navigation = _ref.navigation;\n\n  var _useState = (0, _react.useState)(false),\n      _useState2 = (0, _slicedToArray2.default)(_useState, 2),\n      isModelOpen = _useState2[0],\n      setModel = _useState2[1];\n\n  var _useState3 = (0, _react.useState)(true),\n      _useState4 = (0, _slicedToArray2.default)(_useState3, 2),\n      isLoading = _useState4[0],\n      setLoading = _useState4[1];\n\n  var _useState5 = (0, _react.useState)(0),\n      _useState6 = (0, _slicedToArray2.default)(_useState5, 2),\n      currentUserIndex = _useState6[0],\n      setCurrentUserIndex = _useState6[1];\n\n  var _useState7 = (0, _react.useState)(0),\n      _useState8 = (0, _slicedToArray2.default)(_useState7, 2),\n      currentScrollValue = _useState8[0],\n      setCurrentScrollValue = _useState8[1];\n\n  var modalScroll = (0, _react.useRef)(null);\n  var dispatch = (0, _reactRedux.useDispatch)();\n  var userChatrooms = (0, _reactRedux.useSelector)(function (state) {\n    return state.user.userChatrooms;\n  });\n  var AllStories = (0, _reactRedux.useSelector)(function (state) {\n    return state.user.stories;\n  });\n  var currentUser = _auth.AuthContext._currentValue.currentUser.uid;\n  (0, _react.useEffect)(function () {\n    dispatch(_user.userOperations.getUserChatrooms(currentUser));\n  }, [userChatrooms == null ? void 0 : userChatrooms.length]);\n  (0, _react.useEffect)(function () {\n    dispatch(_user.userOperations.getStories(currentUser));\n  }, [AllStories == null ? void 0 : AllStories.length]);\n\n  var onStorySelect = function onStorySelect(index) {\n    setCurrentUserIndex(index);\n    setModel(true);\n  };\n\n  var onStoryClose = function onStoryClose() {\n    setModel(false);\n  };\n\n  var onStoryNext = function onStoryNext(isScroll) {\n    var newIndex = currentUserIndex + 1;\n\n    if (AllStories.length - 1 > currentUserIndex) {\n      setCurrentUserIndex(newIndex);\n\n      if (!isScroll) {\n        modalScroll.current.scrollTo(newIndex, true);\n      }\n    } else {\n      setModel(false);\n    }\n  };\n\n  var onStoryPrevious = function onStoryPrevious(isScroll) {\n    var newIndex = currentUserIndex - 1;\n\n    if (currentUserIndex > 0) {\n      setCurrentUserIndex(newIndex);\n\n      if (!isScroll) {\n        modalScroll.current.scrollTo(newIndex, true);\n      }\n    }\n  };\n\n  var onScrollChange = function onScrollChange(scrollValue) {\n    if (currentScrollValue > scrollValue) {\n      onStoryNext(true);\n      setCurrentScrollValue(scrollValue);\n    }\n\n    if (currentScrollValue < scrollValue) {\n      onStoryPrevious(true);\n      setCurrentScrollValue(scrollValue);\n    }\n  };\n\n  var chatListItem = function chatListItem(item) {\n    item.user = item.users.find(function (u) {\n      return u !== currentUser;\n    });\n    var otherUserData = item.otherUserData;\n    return _react.default.createElement(_reactNative.TouchableHighlight, {\n      underlayColor: \"rgba(0,0,0,0.0)\",\n      onPress: function onPress() {\n        dispatch(_user.userOperations.getUser(item.user));\n        dispatch(_user.userOperations.viewUser(item.user));\n        navigation.navigate('Messages');\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 7\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.mainCellView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267,\n        columnNumber: 9\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellProfileView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 268,\n        columnNumber: 11\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellProfileImage,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 13\n      }\n    }, _react.default.createElement(_reactNative.ImageBackground, {\n      style: {\n        flex: 1\n      },\n      source: {\n        uri: otherUserData.displayPhoto\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 15\n      }\n    })), _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellRightMainView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 13\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellDateView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 15\n      }\n    }, _react.default.createElement(_reactNative.Text, {\n      style: _styles.default.cellDateTxt,\n      adjustsFontSizeToFit: true,\n      numberOfLines: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 17\n      }\n    }, item.date)), _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellUnreadCountMainView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 15\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellUnreadCountView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 282,\n        columnNumber: 17\n      }\n    }, _react.default.createElement(_reactNative.Text, {\n      style: _styles.default.cellUnreadCountTxt,\n      adjustsFontSizeToFit: true,\n      numberOfLines: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287,\n        columnNumber: 19\n      }\n    }, \"1\"))), _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellCenterMainView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295,\n        columnNumber: 15\n      }\n    }, _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellUsernameView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 17\n      }\n    }, _react.default.createElement(_reactNative.Text, {\n      style: _styles.default.cellUserTxt,\n      adjustsFontSizeToFit: true,\n      numberOfLines: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 19\n      }\n    }, otherUserData.name)), _react.default.createElement(_reactNative.View, {\n      style: _styles.default.cellMsgMainView,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 17\n      }\n    }, _react.default.createElement(_reactNative.Text, {\n      style: _styles.default.cellMsgTxt,\n      adjustsFontSizeToFit: true,\n      numberOfLines: 1,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 19\n      }\n    }, item.lastMessage)))))));\n  };\n\n  return _react.default.createElement(_reactNative.View, {\n    style: _styles.default.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: _styles.default.backImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    style: _styles.default.homeNavigationImage,\n    source: _config.AppImages.homeNavigation,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 9\n    }\n  })), _react.default.createElement(_reactNative.View, {\n    style: _styles.default.viewSwiper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_reactNative.SafeAreaView, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 9\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: _styles.default.viewHeader,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.View, {\n    style: _styles.default.messageView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: _styles.default.storiesText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 15\n    }\n  }, \"Stories\"), _react.default.createElement(_reactNative.Text, {\n    style: _styles.default.messageText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 333,\n      columnNumber: 15\n    }\n  }, \"Messages\"))), _react.default.createElement(_reactNative.View, {\n    style: _styles.default.storiesMainView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative.ScrollView, {\n    horizontal: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 337,\n      columnNumber: 13\n    }\n  }, _react.default.createElement(_reactNative.TouchableOpacity, {\n    onPress: function onPress() {\n      return navigation.navigate('PostStory');\n    },\n    style: _styles.default.cameraMainView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 15\n    }\n  }, _react.default.createElement(_reactNativeLinearGradient.default, {\n    start: {\n      x: 0,\n      y: 1\n    },\n    end: {\n      x: 1,\n      y: 0\n    },\n    colors: ['#7F00EB', '#CF326F'],\n    style: _styles.default.cameraGradientView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_reactNative.Image, {\n    source: _config.AppImages.camera,\n    style: _styles.default.cameraImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 19\n    }\n  })), _react.default.createElement(_reactNative.View, {\n    style: _styles.default.cameraTitleView,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 346,\n      columnNumber: 17\n    }\n  }, _react.default.createElement(_reactNative.Text, {\n    style: _styles.default.cameraTitleText,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 19\n    }\n  }, \"+Add\"))), _react.default.createElement(_reactNative.FlatList, {\n    horizontal: true,\n    data: AllStories,\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    renderItem: function renderItem(_ref2) {\n      var item = _ref2.item,\n          index = _ref2.index;\n      return _react.default.createElement(_reactNative.TouchableOpacity, {\n        key: item.username,\n        style: _styles.default.viewUpcomingEvent,\n        onPress: function onPress() {\n          return onStorySelect(index);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.ImageBackground, {\n        style: _styles.default.storiesProfileImageItem,\n        source: {\n          uri: item.profile\n        },\n        onLoadEnd: function onLoadEnd() {\n          return setLoading(false);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 21\n        }\n      }, _react.default.createElement(_reactNative.ActivityIndicator, {\n        size: \"large\",\n        color: \"gray\",\n        animating: isLoading,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 23\n        }\n      })), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.storiesItemTitleView,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 369,\n          columnNumber: 21\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.storiesItemTitleText,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 23\n        }\n      }, item.username)));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 350,\n      columnNumber: 15\n    }\n  }))), _react.default.createElement(_reactNative.FlatList, {\n    data: userChatrooms,\n    renderItem: function renderItem(_ref3) {\n      var item = _ref3.item;\n      return chatListItem(item);\n    },\n    keyExtractor: function keyExtractor(item) {\n      return item.id;\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 11\n    }\n  }), _react.default.createElement(_reactNative.Modal, {\n    animationType: \"slide\",\n    transparent: false,\n    visible: isModelOpen,\n    onShow: function onShow() {\n      if (currentUserIndex > 0) {\n        modalScroll.current.scrollTo(currentUserIndex, false);\n      }\n    },\n    onRequestClose: onStoryClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 385,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_reactNative3dcubeNavigation.CubeNavigationHorizontal, {\n    callBackAfterSwipe: function callBackAfterSwipe(g) {\n      return onScrollChange(g);\n    },\n    ref: modalScroll,\n    style: _styles.default.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 13\n    }\n  }, AllStories.map(function (item, index) {\n    return _react.default.createElement(_StoryContainer.default, {\n      onClose: onStoryClose,\n      onStoryNext: onStoryNext,\n      onStoryPrevious: onStoryPrevious,\n      user: item,\n      isNewStory: index !== currentUserIndex,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 17\n      }\n    });\n  }))))));\n}","map":{"version":3,"sources":["C:/Program Files/nodejs/ComeClosely/app/views/screens/Messenger/index.tsx"],"names":["MessagesData","id","user","message","image","AppImages","avata1","date","avata2","avata3","avata4","Messenger","navigation","isModelOpen","setModel","isLoading","setLoading","currentUserIndex","setCurrentUserIndex","currentScrollValue","setCurrentScrollValue","modalScroll","dispatch","userChatrooms","state","AllStories","stories","currentUser","AuthContext","_currentValue","uid","userOperations","getUserChatrooms","length","getStories","onStorySelect","index","onStoryClose","onStoryNext","isScroll","newIndex","current","scrollTo","onStoryPrevious","onScrollChange","scrollValue","chatListItem","item","users","find","u","otherUserData","getUser","viewUser","navigate","styles","mainCellView","cellProfileView","cellProfileImage","flex","uri","displayPhoto","cellRightMainView","cellDateView","cellDateTxt","cellUnreadCountMainView","cellUnreadCountView","cellUnreadCountTxt","cellCenterMainView","cellUsernameView","cellUserTxt","name","cellMsgMainView","cellMsgTxt","lastMessage","container","backImage","homeNavigationImage","homeNavigation","viewSwiper","viewHeader","messageView","storiesText","messageText","storiesMainView","cameraMainView","x","y","cameraGradientView","camera","cameraImage","cameraTitleView","cameraTitleText","username","viewUpcomingEvent","storiesProfileImageItem","profile","storiesItemTitleView","storiesItemTitleText","g","map"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect } from 'react';\r\nimport {\r\n  Modal,\r\n  Text,\r\n  TouchableHighlight,\r\n  Image,\r\n  View,\r\n  ScrollView,\r\n  SafeAreaView,\r\n  FlatList,\r\n  TouchableOpacity,\r\n  ImageBackground,\r\n  ActivityIndicator,\r\n} from 'react-native';\r\n\r\nimport { CubeNavigationHorizontal } from 'react-native-3dcube-navigation';\r\nimport LinearGradient from 'react-native-linear-gradient';\r\n\r\nimport { AppImages } from '../../config';\r\nimport styles from './styles';\r\nimport { UserI } from './types';\r\nimport StoryContainer from './components/StoryContainer';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { userOperations } from '../../../state/ducks/user';\r\nimport { AuthContext } from '../../../providers/auth';\r\n\r\n\r\n\r\nconst MessagesData = [\r\n  {\r\n    id: '0',\r\n    user: 'Sankhadeep',\r\n    message: 'Its time to build a difference ...',\r\n    image: AppImages.avata1,\r\n    date: '3 minutes ago',\r\n  },\r\n  {\r\n    id: '1',\r\n    user: 'nik',\r\n    message: 'Its time to build a difference ...',\r\n    image: AppImages.avata2,\r\n    date: '2 days ago',\r\n  },\r\n  {\r\n    id: '2',\r\n    user: 'dhaval',\r\n    message: 'Its time to build a difference ...',\r\n    image: AppImages.avata3,\r\n    date: 'Dec 11, 2018',\r\n  },\r\n  {\r\n    id: '3',\r\n    user: 'johnson',\r\n    message: 'Its time to build a difference ...',\r\n    image: AppImages.avata4,\r\n    date: 'Dec 16, 2018',\r\n  },\r\n];\r\n\r\n// const AllStories: Array<UserI> = [\r\n//   {\r\n//     username: 'Amit',\r\n//     title: 'Pune Dairies',\r\n//     profile: 'https://avatars0.githubusercontent.com/u/16208872?s=460&v=4',\r\n//     stories: [\r\n//       {\r\n//         id: 1,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1532579853048-ec5f8f15f88d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         // duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         // isPaused: true,\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     username: 'Trinadh',\r\n//     profile: 'https://avatars2.githubusercontent.com/u/45196619?s=460&v=4',\r\n//     title: 'My Gallery',\r\n//     stories: [\r\n//       {\r\n//         id: 1,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1500099817043-86d46000d58f?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 2,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1476292026003-1df8db2694b8?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 3,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1498982261566-1c28c9cf4c02?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     username: 'Steve Jobs',\r\n//     profile:\r\n//       'https://s3.amazonaws.com/media.eremedia.com/uploads/2012/05/15181015/stevejobs.jpg',\r\n//     title: ' Beach Moves',\r\n//     stories: [\r\n//       {\r\n//         id: 1,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1515578706925-0dc1a7bfc8cb?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 3,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1496287437689-3c24997cca99?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 4,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1514870262631-55de0332faf6?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//     ],\r\n//   },\r\n//   {\r\n//     username: 'Rahul',\r\n//     profile:\r\n//       'https://images.unsplash.com/profile-1531581190171-0cf831d86212?dpr=2&auto=format&fit=crop&w=150&h=150&q=60&crop=faces&bg=fff',\r\n//     title: 'Beauties @Beach',\r\n//     stories: [\r\n//       {\r\n//         id: 4,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1512101176959-c557f3516787?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 5,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1478397453044-17bb5f994100?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=800&q=60',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//       {\r\n//         id: 4,\r\n//         url:\r\n//           'https://images.unsplash.com/photo-1505118380757-91f5f5632de0?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=581&q=80',\r\n//         type: 'image',\r\n//         duration: 2,\r\n//         isSeen: false,\r\n//         isReadMore: true,\r\n//         isPaused: true,\r\n//       },\r\n//     ],\r\n//   },\r\n// ];\r\n\r\nexport default function Messenger({ navigation }: any) {\r\n  const [isModelOpen, setModel] = useState(false);\r\n  const [isLoading, setLoading] = useState(true);\r\n  const [currentUserIndex, setCurrentUserIndex] = useState(0);\r\n  const [currentScrollValue, setCurrentScrollValue] = useState(0);\r\n  const modalScroll = useRef(null);\r\n\r\n  const dispatch = useDispatch();\r\n  const userChatrooms = useSelector((state: any) => state.user.userChatrooms);\r\n  let AllStories: any = useSelector((state: any) => state.user.stories);\r\n\r\n  const currentUser = AuthContext._currentValue.currentUser.uid;\r\n\r\n  useEffect(() => {\r\n    dispatch(userOperations.getUserChatrooms(currentUser))\r\n  }, [userChatrooms?.length]);\r\n\r\n  useEffect(() => {\r\n    dispatch(userOperations.getStories(currentUser))\r\n  }, [AllStories?.length]);\r\n\r\n  const onStorySelect = (index: number) => {\r\n    setCurrentUserIndex(index);\r\n    setModel(true);\r\n  };\r\n  const onStoryClose = () => {\r\n    setModel(false);\r\n  };\r\n\r\n  const onStoryNext = (isScroll: boolean) => {\r\n    const newIndex = currentUserIndex + 1;\r\n    if (AllStories.length - 1 > currentUserIndex) {\r\n      setCurrentUserIndex(newIndex);\r\n      if (!isScroll) {\r\n        modalScroll.current.scrollTo(newIndex, true);\r\n      }\r\n    } else {\r\n      setModel(false);\r\n    }\r\n  };\r\n\r\n  const onStoryPrevious = (isScroll: boolean) => {\r\n    const newIndex = currentUserIndex - 1;\r\n    if (currentUserIndex > 0) {\r\n      setCurrentUserIndex(newIndex);\r\n      if (!isScroll) {\r\n        modalScroll.current.scrollTo(newIndex, true);\r\n      }\r\n    }\r\n  };\r\n\r\n  const onScrollChange = (scrollValue: number) => {\r\n    if (currentScrollValue > scrollValue) {\r\n      onStoryNext(true);\r\n      setCurrentScrollValue(scrollValue);\r\n    }\r\n    if (currentScrollValue < scrollValue) {\r\n      onStoryPrevious(true);\r\n      setCurrentScrollValue(scrollValue);\r\n    }\r\n  };\r\n\r\n  const chatListItem = (item: any) => {\r\n    item.user = item.users.find(u => u !== currentUser)\r\n    const { otherUserData } = item;\r\n    return (\r\n      <TouchableHighlight\r\n        underlayColor=\"rgba(0,0,0,0.0)\"\r\n        onPress={() => {\r\n          dispatch(userOperations.getUser(item.user))\r\n          dispatch(userOperations.viewUser(item.user))\r\n          navigation.navigate('Messages');\r\n        }}>\r\n        <View style={styles.mainCellView}>\r\n          <View style={styles.cellProfileView}>\r\n            <View style={styles.cellProfileImage}>\r\n              <ImageBackground style={{ flex: 1 }} source={{ uri: otherUserData.displayPhoto }} />\r\n            </View>\r\n            <View style={styles.cellRightMainView}>\r\n              <View style={styles.cellDateView}>\r\n                <Text\r\n                  style={styles.cellDateTxt}\r\n                  adjustsFontSizeToFit\r\n                  numberOfLines={1}>\r\n                  {item.date}\r\n                </Text>\r\n              </View>\r\n              <View style={styles.cellUnreadCountMainView}>\r\n                <View\r\n                  style={styles.cellUnreadCountView}\r\n                /* adjustsFontSizeToFit\r\n                numberOfLines={1} */\r\n                >\r\n                  <Text\r\n                    style={styles.cellUnreadCountTxt}\r\n                    adjustsFontSizeToFit\r\n                    numberOfLines={1}>\r\n                    1\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n              <View style={styles.cellCenterMainView}>\r\n                <View style={styles.cellUsernameView}>\r\n                  <Text\r\n                    style={styles.cellUserTxt}\r\n                    adjustsFontSizeToFit\r\n                    numberOfLines={1}>\r\n                    {otherUserData.name}\r\n                  </Text>\r\n                </View>\r\n                <View style={styles.cellMsgMainView}>\r\n                  <Text\r\n                    style={styles.cellMsgTxt}\r\n                    adjustsFontSizeToFit\r\n                    numberOfLines={1}>\r\n                    {item.lastMessage}\r\n                  </Text>\r\n                </View>\r\n              </View>\r\n            </View>\r\n          </View>\r\n        </View>\r\n      </TouchableHighlight>\r\n    );\r\n  };\r\n\r\n  return (\r\n    <View style={styles.container}>\r\n      <View style={styles.backImage}>\r\n        <Image\r\n          style={styles.homeNavigationImage}\r\n          source={AppImages.homeNavigation}\r\n        />\r\n      </View>\r\n      <View style={styles.viewSwiper}>\r\n        <SafeAreaView>\r\n          <View style={styles.viewHeader}>\r\n            <View style={styles.messageView}>\r\n              <Text style={styles.storiesText}>Stories</Text>\r\n              <Text style={styles.messageText}>Messages</Text>\r\n            </View>\r\n          </View>\r\n          <View style={styles.storiesMainView}>\r\n            <ScrollView horizontal={true}>\r\n              <TouchableOpacity onPress={() => navigation.navigate('PostStory')} style={styles.cameraMainView}>\r\n                <LinearGradient\r\n                  start={{ x: 0, y: 1 }}\r\n                  end={{ x: 1, y: 0 }}\r\n                  colors={['#7F00EB', '#CF326F']}\r\n                  style={styles.cameraGradientView}>\r\n                  <Image source={AppImages.camera} style={styles.cameraImage} />\r\n                </LinearGradient>\r\n                <View style={styles.cameraTitleView}>\r\n                  <Text style={styles.cameraTitleText}>+Add</Text>\r\n                </View>\r\n              </TouchableOpacity>\r\n              <FlatList\r\n                horizontal\r\n                data={AllStories}\r\n                keyExtractor={(item) => item.id}\r\n                renderItem={({ item, index }) => (\r\n                  <TouchableOpacity\r\n                    key={item.username}\r\n                    style={styles.viewUpcomingEvent}\r\n                    onPress={() => onStorySelect(index)}>\r\n                    <ImageBackground\r\n                      style={styles.storiesProfileImageItem}\r\n                      source={{ uri: item.profile }}\r\n                      onLoadEnd={() => setLoading(false)}>\r\n                      <ActivityIndicator\r\n                        size=\"large\"\r\n                        color=\"gray\"\r\n                        animating={isLoading}\r\n                      />\r\n                    </ImageBackground>\r\n                    <View style={styles.storiesItemTitleView}>\r\n                      <Text style={styles.storiesItemTitleText}>\r\n                        {item.username}\r\n                      </Text>\r\n                    </View>\r\n                  </TouchableOpacity>\r\n                )}\r\n              />\r\n            </ScrollView>\r\n          </View>\r\n          <FlatList\r\n            data={userChatrooms}\r\n            // data={MessagesData}\r\n            renderItem={({ item }) => chatListItem(item)}\r\n            keyExtractor={(item) => item.id}\r\n          />\r\n          <Modal\r\n            animationType=\"slide\"\r\n            transparent={false}\r\n            visible={isModelOpen}\r\n            /* style={styles.modal} */\r\n            onShow={() => {\r\n              if (currentUserIndex > 0) {\r\n                modalScroll.current.scrollTo(currentUserIndex, false);\r\n              }\r\n            }}\r\n            onRequestClose={onStoryClose}>\r\n            <CubeNavigationHorizontal\r\n              callBackAfterSwipe={(g: number) => onScrollChange(g)}\r\n              ref={modalScroll}\r\n              style={styles.container}>\r\n              {AllStories.map((item: UserI, index: number) => (\r\n                <StoryContainer\r\n                  onClose={onStoryClose}\r\n                  onStoryNext={onStoryNext}\r\n                  onStoryPrevious={onStoryPrevious}\r\n                  user={item}\r\n                  isNewStory={index !== currentUserIndex}\r\n                />\r\n              ))}\r\n            </CubeNavigationHorizontal>\r\n          </Modal>\r\n        </SafeAreaView>\r\n      </View>\r\n    </View>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"script"}