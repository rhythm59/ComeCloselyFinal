{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _classCallCheck2 = _interopRequireDefault(require(\"@babel/runtime/helpers/classCallCheck\"));\n\nvar _createClass2 = _interopRequireDefault(require(\"@babel/runtime/helpers/createClass\"));\n\nvar _inherits2 = _interopRequireDefault(require(\"@babel/runtime/helpers/inherits\"));\n\nvar _possibleConstructorReturn2 = _interopRequireDefault(require(\"@babel/runtime/helpers/possibleConstructorReturn\"));\n\nvar _getPrototypeOf2 = _interopRequireDefault(require(\"@babel/runtime/helpers/getPrototypeOf\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _reactNative = require(\"react-native\");\n\nvar _reactRedux = require(\"react-redux\");\n\nvar _reactNativeSkeletonPlaceholder = _interopRequireDefault(require(\"react-native-skeleton-placeholder\"));\n\nvar Progress = _interopRequireWildcard(require(\"react-native-progress\"));\n\nvar _config = require(\"../../config\");\n\nvar _styles = _interopRequireDefault(require(\"./styles\"));\n\nvar _auth = require(\"../../../providers/auth\");\n\nvar _user = require(\"../../../state/ducks/user\");\n\nvar _utils = require(\"../../../utils\");\n\nvar _jsxFileName = \"C:\\\\Program Files\\\\nodejs\\\\ComeClosely\\\\app\\\\views\\\\screens\\\\Profile\\\\index.tsx\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nvar INITIAL_STATE = {\n  dataSource: [],\n  ignoreResetUser: false\n};\n\nvar Profile = function (_React$Component) {\n  (0, _inherits2.default)(Profile, _React$Component);\n\n  var _super = _createSuper(Profile);\n\n  function Profile(props) {\n    var _this;\n\n    (0, _classCallCheck2.default)(this, Profile);\n    _this = _super.call(this, props);\n\n    _this.onFollowButtonPress = function () {\n      var follower = _this.props.follower;\n\n      if (follower.find(function (item) {\n        return item.userKey == _this.context.currentUser.uid;\n      })) {\n        console.log('unfollow:', follower);\n\n        _this.props.unfollowUser(_this.context.currentUser.uid, _this.props.userToView);\n      } else {\n        console.log('follow:', follower);\n\n        _this.props.followUser(_this.context.currentUser.uid, _this.props.userToView);\n      }\n    };\n\n    _this.state = (0, _extends2.default)({}, INITIAL_STATE);\n    return _this;\n  }\n\n  (0, _createClass2.default)(Profile, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this$props$route, _this$props$route$par, _prevProps$route, _prevProps$route$para;\n\n      var flowType = (_this$props$route = this.props.route) == null ? void 0 : (_this$props$route$par = _this$props$route.params) == null ? void 0 : _this$props$route$par.flowType;\n      var prevFlowType = (_prevProps$route = prevProps.route) == null ? void 0 : (_prevProps$route$para = _prevProps$route.params) == null ? void 0 : _prevProps$route$para.flowType;\n\n      if (flowType !== prevFlowType) {\n        if (flowType === 'userToView') this.props.getUser(this.props.userToView);else this.props.getUser(this.context.currentUser.uid);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      this._unsubscribe = this.props.navigation.addListener('blur', function () {\n        if (!_this2.state.ignoreResetUser) {\n          _this2.props.getUser(_this2.context.currentUser.uid);\n\n          _this2.props.setViewUser(null);\n        }\n\n        _this2._unsubscribe();\n      });\n      var dataSource = this.props.memories.filter(function (item) {\n        return item.userId == _this2.props.userToView;\n      });\n      this.setState({\n        dataSource: dataSource\n      });\n      var that = this;\n      if (this.props.userToView) that.props.getUser(this.props.userToView);else that.props.getUser(that.context.currentUser.uid);\n      this.props.getFollowing(this.props.userToView);\n      this.props.getFollower(this.props.userToView);\n      this.props.getMessages(that.context.currentUser.uid, this.props.userToView);\n    }\n  }, {\n    key: \"onChange\",\n    value: function onChange() {\n      this.props.getFollower(this.props.userToView);\n      this.props.getMessages(this.context.currentUser.uid, this.props.userToView);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var _this$props = this.props,\n          getUserLoading = _this$props.getUserLoading,\n          user = _this$props.user,\n          follower = _this$props.follower;\n      console.log(user);\n      return _react.default.createElement(_reactNative.View, {\n        style: _styles.default.mainView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124,\n          columnNumber: 7\n        }\n      }, _react.default.createElement(_reactNative.ScrollView, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 9\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.backImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 11\n        }\n      }, _react.default.createElement(_reactNative.Image, {\n        style: _styles.default.backgroundImage,\n        source: _config.AppImages.homeNavigation,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 13\n        }\n      })), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.overlay,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.profileTitleView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 13\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.profileText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 17\n        }\n      }, \"Profile\")), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.menuImageMainView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Image, {\n        source: _config.AppImages.menu,\n        style: _styles.default.menuImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138,\n          columnNumber: 17\n        }\n      })))), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.profileImageView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }\n      }, getUserLoading && _react.default.createElement(_reactNativeSkeletonPlaceholder.default, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.profileImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 17\n        }\n      })), !getUserLoading && _react.default.createElement(_reactNative.Image, {\n        style: _styles.default.profileImage,\n        source: {\n          uri: (user == null ? void 0 : user.displayPhoto) || (0, _utils.getGravatarSrc)(user.email)\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 15\n        }\n      })), getUserLoading && _react.default.createElement(_reactNativeSkeletonPlaceholder.default, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 13\n        }\n      }, _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        width: \"100%\",\n        flexDirection: \"row\",\n        justifyContent: \"center\",\n        alignItems: \"center\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        marginLeft: 20,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 164,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        width: 200,\n        height: 20,\n        marginTop: 10,\n        borderRadius: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 19\n        }\n      }), _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        width: 200,\n        height: 20,\n        marginTop: 10,\n        borderRadius: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 19\n        }\n      }), _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        width: 200,\n        height: 20,\n        marginTop: 10,\n        borderRadius: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 19\n        }\n      }), _react.default.createElement(_reactNativeSkeletonPlaceholder.default.Item, {\n        width: 200,\n        height: 20,\n        marginTop: 10,\n        borderRadius: 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 19\n        }\n      })))), !getUserLoading && _react.default.createElement(_react.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 194,\n          columnNumber: 13\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.userMainView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.nameText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196,\n          columnNumber: 17\n        }\n      }, user.name), _react.default.createElement(_reactNative.Image, {\n        source: _config.AppImages.verify,\n        style: _styles.default.verified,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 17\n        }\n      })), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.followersFollowingView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.followingView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.followingText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 21\n        }\n      }, \"Following\")), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.followingTextView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.followingCountText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 21\n        }\n      }, this.props.following.length))), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.followersView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.followersText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 21\n        }\n      }, \"Followers\")), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.followersTextView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.followersCountText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }\n      }, this.props.follower.length)))), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.levelTextMainView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 220,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.levelText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 17\n        }\n      }, \"Level\"), _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.levelTextAns,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 222,\n          columnNumber: 17\n        }\n      }, \"Master\")), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.progressbarMainView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(Progress.Bar, {\n        progress: 0.3,\n        width: 300,\n        height: 3,\n        color: '#CF326F',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 17\n        }\n      })), user.email !== this.context.currentUser.email && _react.default.createElement(_react.Fragment, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.locationFollowingView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 19\n        }\n      }, _react.default.createElement(_reactNative.TouchableOpacity, {\n        onPress: function onPress() {\n          _this3.setState({\n            ignoreResetUser: true\n          });\n\n          _this3.props.getUser(_this3.props.userToView);\n\n          _this3.props.setViewUser(_this3.props.userToView);\n\n          _this3.props.navigation.navigate('Messages');\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }\n      }, _react.default.createElement(_reactNative.View, {\n        style: _styles.default.locationImage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 243,\n          columnNumber: 23\n        }\n      }, _react.default.createElement(_reactNative.Image, {\n        style: _styles.default.messageButton,\n        resizeMode: \"contain\",\n        source: _config.AppImages.sendmessagebutton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 25\n        }\n      }))), _react.default.createElement(_reactNative.TouchableOpacity, {\n        onPress: this.onFollowButtonPress,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 21\n        }\n      }, follower.find(function (item) {\n        return item.userKey === _this3.context.currentUser.uid;\n      }) ? _react.default.createElement(_reactNative.Image, {\n        style: _styles.default.followButton,\n        source: _config.AppImages.followingbutton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 250,\n          columnNumber: 25\n        }\n      }) : _react.default.createElement(_reactNative.Image, {\n        style: _styles.default.followButton,\n        source: _config.AppImages.followbutton,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 25\n        }\n      })))), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.profileBioTextMian,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 269,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.profileBioText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 17\n        }\n      }, \"Here is my biogaraphy. Let's party hard and create memories through\")), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.memoriesView,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 15\n        }\n      }, _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.memoriesText,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 277,\n          columnNumber: 17\n        }\n      }, \"Memories\"), _react.default.createElement(_reactNative.Text, {\n        style: _styles.default.memoriesTextCount,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 17\n        }\n      }, this.state.dataSource.length))), _react.default.createElement(_reactNative.SafeAreaView, {\n        style: _styles.default.imageMainContainer,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 283,\n          columnNumber: 11\n        }\n      }, _react.default.createElement(_reactNative.FlatList, {\n        data: this.state.dataSource,\n        renderItem: function renderItem(_ref) {\n          var item = _ref.item;\n          return _react.default.createElement(_reactNative.View, {\n            style: _styles.default.imageThumbnailView,\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 17\n            }\n          }, _react.default.createElement(_reactNative.Image, {\n            style: _styles.default.imageThumbnail,\n            source: {\n              uri: item.image\n            },\n            __self: _this3,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 288,\n              columnNumber: 19\n            }\n          }));\n        },\n        numColumns: 3,\n        keyExtractor: function keyExtractor(item, index) {\n          return index.toString();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 13\n        }\n      }), _react.default.createElement(_reactNative.View, {\n        style: _styles.default.bottomPadding,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 13\n        }\n      }))));\n    }\n  }]);\n  return Profile;\n}(_react.default.Component);\n\nProfile.contextType = _auth.AuthContext;\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    getUser: function getUser(id) {\n      return dispatch(_user.userOperations.getUser(id));\n    },\n    getFollowing: function getFollowing(key) {\n      return dispatch(_user.userOperations.getFollowing(key));\n    },\n    getFollower: function getFollower(key) {\n      return dispatch(_user.userOperations.getFollower(key));\n    },\n    followUser: function followUser(userKey, followUserKey) {\n      return dispatch(_user.userOperations.followUser(userKey, followUserKey));\n    },\n    unfollowUser: function unfollowUser(userKey, followUserKey) {\n      return dispatch(_user.userOperations.unfollowUser(userKey, followUserKey));\n    },\n    getMessages: function getMessages(userKey, otherUserKey) {\n      return dispatch(_user.userOperations.getMessages(userKey, otherUserKey));\n    },\n    setViewUser: function setViewUser(key) {\n      return dispatch(_user.userOperations.viewUser(key));\n    }\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    memories: state.memories.memories,\n    user: state.user.user,\n    getUserError: state.user.getUserError,\n    getUserLoading: state.user.getUserLoading,\n    follower: state.user.follower,\n    following: state.user.following,\n    userToView: state.user.userToView\n  };\n};\n\nvar _default = (0, _reactRedux.connect)(mapStateToProps, mapDispatchToProps)(Profile);\n\nexports.default = _default;","map":{"version":3,"sources":["C:/Program Files/nodejs/ComeClosely/app/views/screens/Profile/index.tsx"],"names":["INITIAL_STATE","dataSource","ignoreResetUser","Profile","props","onFollowButtonPress","follower","find","item","userKey","context","currentUser","uid","console","log","unfollowUser","userToView","followUser","state","prevProps","prevState","flowType","route","params","prevFlowType","getUser","_unsubscribe","navigation","addListener","setViewUser","memories","filter","userId","setState","that","getFollowing","getFollower","getMessages","getUserLoading","user","styles","mainView","backImage","backgroundImage","AppImages","homeNavigation","overlay","profileTitleView","profileText","menuImageMainView","menu","menuImage","profileImageView","profileImage","uri","displayPhoto","email","userMainView","nameText","name","verify","verified","followersFollowingView","followingView","followingText","followingTextView","followingCountText","following","length","followersView","followersText","followersTextView","followersCountText","levelTextMainView","levelText","levelTextAns","progressbarMainView","locationFollowingView","navigate","locationImage","messageButton","sendmessagebutton","followButton","followingbutton","followbutton","profileBioTextMian","profileBioText","memoriesView","memoriesText","memoriesTextCount","imageMainContainer","imageThumbnailView","imageThumbnail","image","index","toString","bottomPadding","React","Component","contextType","AuthContext","mapDispatchToProps","dispatch","id","userOperations","key","followUserKey","otherUserKey","viewUser","mapStateToProps","getUserError"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\r\nimport {\r\n  View,\r\n  Text,\r\n  ScrollView,\r\n  Image,\r\n  FlatList,\r\n  SafeAreaView,\r\n  TouchableOpacity,\r\n  Alert\r\n} from 'react-native';\r\n\r\nimport { connect, useSelector, useDispatch } from 'react-redux';\r\nimport SkeletonPlaceholder from 'react-native-skeleton-placeholder';\r\nimport * as Progress from 'react-native-progress';\r\n\r\nimport { AppImages } from '../../config';\r\nimport styles from './styles';\r\nimport { AuthContext } from '../../../providers/auth';\r\nimport { UserI } from '../../../state/types';\r\nimport { userOperations } from '../../../state/ducks/user';\r\nimport UserView from '../Messenger/components/UserView';\r\nimport { getGravatarSrc } from '../../../utils';\r\n\r\n\r\ninterface DataSourceI {\r\n  name: string;\r\n}\r\ninterface ComponentProps {\r\n  navigation: any;\r\n  route: any;\r\n  memories: any;\r\n  user: UserI;\r\n  userToView: any;\r\n  getUserError: string;\r\n  getUserLoading: boolean;\r\n  followUser: any,\r\n  following: any,\r\n  follower: any,\r\n  getUser(id: string): void;\r\n  getFollowing(id: string): void;\r\n  getFollower(id: string): void;\r\n  getMessages(id: string, messages: any): void;\r\n  unfollowUser(userKey: string, followUserKey: any): void;\r\n  setViewUser(userKey: string): void;\r\n}\r\ninterface ComponentState {\r\n  dataSource: Array<DataSourceI>;\r\n  ignoreResetUser: boolean;\r\n}\r\nconst INITIAL_STATE: ComponentState = {\r\n  dataSource: [],\r\n  ignoreResetUser: false,\r\n};\r\n\r\nclass Profile extends React.Component<ComponentProps, ComponentState> {\r\n  constructor(props: any) {\r\n    super(props);\r\n    this.state = { ...INITIAL_STATE };\r\n  }\r\n  componentDidUpdate(prevProps: any, prevState: any) {\r\n    let flowType = this.props.route?.params?.flowType;\r\n    let prevFlowType = prevProps.route?.params?.flowType;\r\n    if (flowType !== prevFlowType) {\r\n      if (flowType === 'userToView')\r\n        this.props.getUser(this.props.userToView);\r\n      else\r\n        this.props.getUser(this.context.currentUser.uid);\r\n    }\r\n  }\r\n  \r\n  componentDidMount() {\r\n    this._unsubscribe = this.props.navigation.addListener('blur', () => {\r\n      if (!this.state.ignoreResetUser) {\r\n        this.props.getUser(this.context.currentUser.uid)\r\n        this.props.setViewUser(null)\r\n      }\r\n      this._unsubscribe();\r\n      // do something\r\n    });\r\n    const dataSource = this.props.memories.filter((item: any) => item.userId == this.props.userToView)\r\n    this.setState({ dataSource })\r\n\r\n    var that = this;\r\n    // let items = Array.apply(null, Array(10)).map((v, i) => {\r\n    //   return { id: i, src: 'https://unsplash.it/400/400?image=' + (i + 1) };\r\n    // });\r\n    // that.setState({\r\n    //   dataSource: items,\r\n    // });\r\n    if (this.props.userToView)\r\n      that.props.getUser(this.props.userToView);\r\n    else\r\n      that.props.getUser(that.context.currentUser.uid);\r\n    // this.props.getFollowing(that.context.currentUser.uid)\r\n    // this.props.getFollower(that.context.currentUser.uid)\r\n    this.props.getFollowing(this.props.userToView)\r\n    this.props.getFollower(this.props.userToView)\r\n    this.props.getMessages(that.context.currentUser.uid, this.props.userToView)\r\n  }\r\n\r\n  onChange() {\r\n    this.props.getFollower(this.props.userToView)\r\n    this.props.getMessages(this.context.currentUser.uid, this.props.userToView)\r\n  }\r\n\r\n  onFollowButtonPress = () => {\r\n    const { follower } = this.props;\r\n    if (follower.find((item: any) => item.userKey == this.context.currentUser.uid)) {\r\n      console.log('unfollow:', follower)\r\n      this.props.unfollowUser(this.context.currentUser.uid, this.props.userToView)\r\n    }\r\n    else {\r\n      console.log('follow:', follower)\r\n      this.props.followUser(this.context.currentUser.uid, this.props.userToView)\r\n    }\r\n    // this.onChange();\r\n  }\r\n\r\n  render() {\r\n    const { getUserLoading, user, follower } = this.props;\r\n    console.log(user)\r\n    return (\r\n      <View style={styles.mainView}>\r\n        <ScrollView>\r\n          <View style={styles.backImage}>\r\n            <Image\r\n              style={styles.backgroundImage}\r\n              source={AppImages.homeNavigation}\r\n            />\r\n          </View>\r\n          <View style={styles.overlay}>\r\n            <View style={styles.profileTitleView}>\r\n              <View>\r\n                <Text style={styles.profileText}>Profile</Text>\r\n              </View>\r\n              <View style={styles.menuImageMainView}>\r\n                <Image source={AppImages.menu} style={styles.menuImage} />\r\n              </View>\r\n            </View>\r\n          </View>\r\n\r\n          <View style={styles.profileImageView}>\r\n            {getUserLoading && (\r\n              <SkeletonPlaceholder>\r\n                <View style={styles.profileImage} />\r\n              </SkeletonPlaceholder>\r\n            )}\r\n            {!getUserLoading && (\r\n              <Image\r\n                style={styles.profileImage}\r\n                source={{ uri: user?.displayPhoto || getGravatarSrc(user.email) }}\r\n              />\r\n            )}\r\n          </View>\r\n\r\n          {getUserLoading && (\r\n            <SkeletonPlaceholder>\r\n              <SkeletonPlaceholder.Item\r\n                width=\"100%\"\r\n                flexDirection=\"row\"\r\n                justifyContent=\"center\"\r\n                alignItems=\"center\">\r\n                <SkeletonPlaceholder.Item marginLeft={20}>\r\n                  <SkeletonPlaceholder.Item\r\n                    width={200}\r\n                    height={20}\r\n                    marginTop={10}\r\n                    borderRadius={5}\r\n                  />\r\n                  <SkeletonPlaceholder.Item\r\n                    width={200}\r\n                    height={20}\r\n                    marginTop={10}\r\n                    borderRadius={5}\r\n                  />\r\n                  <SkeletonPlaceholder.Item\r\n                    width={200}\r\n                    height={20}\r\n                    marginTop={10}\r\n                    borderRadius={5}\r\n                  />\r\n                  <SkeletonPlaceholder.Item\r\n                    width={200}\r\n                    height={20}\r\n                    marginTop={10}\r\n                    borderRadius={5}\r\n                  />\r\n                </SkeletonPlaceholder.Item>\r\n              </SkeletonPlaceholder.Item>\r\n            </SkeletonPlaceholder>\r\n          )}\r\n          {!getUserLoading && (\r\n            <Fragment>\r\n              <View style={styles.userMainView}>\r\n                <Text style={styles.nameText}>{user.name}</Text>\r\n                <Image source={AppImages.verify} style={styles.verified} />\r\n              </View>\r\n\r\n\r\n              <View style={styles.followersFollowingView}>\r\n                <View style={styles.followingView}>\r\n                  <View>\r\n                    <Text style={styles.followingText}>Following</Text>\r\n                  </View>\r\n                  <View style={styles.followingTextView}>\r\n                    <Text style={styles.followingCountText}>{this.props.following.length}</Text>\r\n                  </View>\r\n                </View>\r\n                <View style={styles.followersView}>\r\n                  <View>\r\n                    <Text style={styles.followersText}>Followers</Text>\r\n                  </View>\r\n                  <View style={styles.followersTextView}>\r\n                    <Text style={styles.followersCountText}>{this.props.follower.length}</Text>\r\n                  </View>\r\n                </View>\r\n              </View>\r\n\r\n              <View style={styles.levelTextMainView}>\r\n                <Text style={styles.levelText}>Level</Text>\r\n                <Text style={styles.levelTextAns}>Master</Text>\r\n              </View>\r\n              <View style={styles.progressbarMainView}>\r\n                <Progress.Bar\r\n                  progress={0.3}\r\n                  width={300}\r\n                  height={3}\r\n                  color={'#CF326F'}\r\n                />\r\n              </View>\r\n\r\n              {user.email !== this.context.currentUser.email && (\r\n                <Fragment>\r\n                  <View style={styles.locationFollowingView}>\r\n\r\n                    <TouchableOpacity onPress={() => {\r\n                      this.setState({ ignoreResetUser: true })\r\n                      this.props.getUser(this.props.userToView)\r\n                      this.props.setViewUser(this.props.userToView)\r\n                      this.props.navigation.navigate('Messages')\r\n                    }}>\r\n                      <View style={styles.locationImage}>\r\n                        <Image style={styles.messageButton} resizeMode=\"contain\" source={AppImages.sendmessagebutton} />\r\n                      </View>\r\n                    </TouchableOpacity>\r\n\r\n                    <TouchableOpacity onPress={this.onFollowButtonPress}>\r\n                      {follower.find((item: any) => item.userKey === this.context.currentUser.uid) ?\r\n                        <Image style={styles.followButton} source={AppImages.followingbutton} /> :\r\n                        <Image style={styles.followButton} source={AppImages.followbutton} />\r\n                      }\r\n                    </TouchableOpacity>\r\n\r\n                  </View>\r\n\r\n                  {/* <View style={styles.dotView}>\r\n                    <View>\r\n                      <Image source={AppImages.dotview} />\r\n                    </View>\r\n                  </View>\r\n                  \r\n                  <View style={{}}>\r\n\r\n                  </View> */}\r\n                </Fragment>\r\n              )}\r\n\r\n              <View style={styles.profileBioTextMian}>\r\n                <Text style={styles.profileBioText}>\r\n                  Here is my biogaraphy. Let's party hard and create memories\r\n                  through\r\n                </Text>\r\n              </View>\r\n\r\n              <View style={styles.memoriesView}>\r\n                <Text style={styles.memoriesText}>Memories</Text>\r\n                <Text style={styles.memoriesTextCount}>{this.state.dataSource.length}</Text>\r\n              </View>\r\n            </Fragment>\r\n          )}\r\n\r\n          <SafeAreaView style={styles.imageMainContainer}>\r\n            <FlatList\r\n              data={this.state.dataSource}\r\n              renderItem={({ item }) => (\r\n                <View style={styles.imageThumbnailView}>\r\n                  <Image\r\n                    style={styles.imageThumbnail}\r\n                    source={{ uri: item.image }}\r\n                  />\r\n                </View>\r\n              )}\r\n              numColumns={3}\r\n              keyExtractor={(item, index) => index.toString()}\r\n            />\r\n            <View style={styles.bottomPadding} />\r\n          </SafeAreaView>\r\n        </ScrollView>\r\n      </View>\r\n    );\r\n  }\r\n}\r\nProfile.contextType = AuthContext;\r\n\r\nconst mapDispatchToProps = (dispatch: Function) => {\r\n  return {\r\n    getUser: (id: string) => dispatch(userOperations.getUser(id)),\r\n    getFollowing: (key: string) => dispatch(userOperations.getFollowing(key)),\r\n    getFollower: (key: string) => dispatch(userOperations.getFollower(key)),\r\n    followUser: (userKey: string, followUserKey: string) => dispatch(userOperations.followUser(userKey, followUserKey)),\r\n    unfollowUser: (userKey: string, followUserKey: string) => dispatch(userOperations.unfollowUser(userKey, followUserKey)),\r\n    getMessages: (userKey: string, otherUserKey: string) => dispatch(userOperations.getMessages(userKey, otherUserKey)),\r\n    setViewUser: (key: string) => dispatch(userOperations.viewUser(key))\r\n  };\r\n};\r\n\r\nconst mapStateToProps = (state: any) => {\r\n  // console.log(state.user.)\r\n  return {\r\n    memories: state.memories.memories,\r\n    user: state.user.user,\r\n    getUserError: state.user.getUserError,\r\n    getUserLoading: state.user.getUserLoading,\r\n    follower: state.user.follower,\r\n    following: state.user.following,\r\n    userToView: state.user.userToView,\r\n\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Profile);\r\n"]},"metadata":{},"sourceType":"script"}